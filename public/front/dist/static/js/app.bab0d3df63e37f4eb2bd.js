webpackJsonp([4],{"71cX":function(e,t){},CtTC:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("//Fk"),a=n.n(o),i=n("7+uW"),r=n("/ocq"),s={name:"Login",data:function(){return{msg:"Welcome to Your Vue.js App",loginForm:{},loading:!1,form:{userName:"",password:""},rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:6,message:"长度2到6个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},computed:{containerStyle:function(){var e=window.localStorage.getItem("windowHeight");window.localStorage.getItem("windowWidth");return{height:e+"px"}}},mounted:function(){var e=window.localStorage.getItem("windowHeight"),t=window.localStorage.getItem("windowWidth");this.containerStyle.height=e+"px",this.loginForm=t<400?{width:"100%",height:"50%",position:"fixed",top:"25%",right:"2%",opacity:"0.6"}:{width:"35%",height:"35%",position:"fixed",top:"15%",right:"4%",opacity:"0.6"},this.$route.params.originRoute&&this.$message({message:"你还未登录，登陆后才能操作哦",type:"warning"})},methods:{login:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.loading=!0,t.$store.state.axiosInstance({method:"post",url:"koa2vue/publicService/login",data:t.form}).then(function(e){if("S"==e.data.code){t.loading=!1,t.$store.commit("setCurrUser",e.data.user.userName);var n=t.$route.params.originRoute;n&&(n.name="layout"),t.$router.push({name:"layout",params:{name:e.data.user.userName}})}else t.loading=!1,t.$message({message:e.data.msg,type:"error"})}))})},register:function(){}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[n("el-container",[n("el-header",[n("h1",{staticStyle:{"font-style":"italic"}},[e._v("i Note")])]),e._v(" "),n("el-main",{style:e.containerStyle},[n("div",{staticClass:"bgImg",style:e.containerStyle},[n("el-form",{ref:"form",style:e.loginForm,attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[n("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[n("el-input",{model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.login("form")}}},[e._v("登录")]),e._v(" "),n("el-button",{on:{click:e.register}},[e._v("注册")])],1)],1)],1)])],1)],1)},staticRenderFns:[]};var c=n("VU/8")(s,l,!1,function(e){n("71cX")},"data-v-55b6d321",null).exports,u={data:function(){return{activeIndex:"1",containerStyle:{},name:""}},methods:{handleSelect:function(e,t){console.log(e,t),"/koa2vue/articlesList"==e?this.$router.push({path:e,query:{public:!0}}):this.$router.push({path:e})},logout:function(){var e=this;this.loading=!0,this.$store.state.axiosInstance.put("koa2vue/publicService/logout").then(function(t){e.loading=!1,"S"==t.data.code?e.$router.push("/login"):e.$message({message:""+t.data.msg,type:"error"})}).catch(function(t){console.log(t),e.loading=!1,e.$message({message:""+t,type:"error"})})}},mounted:function(){this.name=window.localStorage.getItem("username")}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{style:e.containerStyle},[n("el-header",[n("el-row",[n("el-col",{attrs:{span:2}},[n("h1",[e._v("iNote")])]),e._v(" "),n("el-col",{attrs:{span:19}},[n("el-menu",{attrs:{mode:"horizontal","default-active":e.activeIndex,"background-color":"#191c1f","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:e.handleSelect}},[n("el-menu-item",{attrs:{index:"/koa2vue/articlesList"}},[e._v("Home")]),e._v(" "),n("el-menu-item",{attrs:{index:"/koa2vue/myArticlesList"}},[e._v("My Note")]),e._v(" "),n("el-menu-item",{attrs:{index:"/koa2vue/publish"}},[e._v("Publish Note")]),e._v(" "),n("el-submenu",{attrs:{index:"4"}},[n("template",{slot:"title"},[e._v("Demo")]),e._v(" "),n("el-menu-item",{attrs:{index:"/koa2vue/grid"}},[e._v("Grid列表")]),e._v(" "),n("el-menu-item",{attrs:{index:"4-2"}},[e._v("选项4-1")])],2)],1)],1),e._v(" "),n("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[n("h4",[e._v(e._s(e.name))])]),e._v(" "),n("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[n("el-button",{attrs:{type:"text"},on:{click:e.logout}},[n("h4",[e._v("退出登录")])])],1)],1)],1),e._v(" "),n("el-main",[n("router-view")],1)],1)},staticRenderFns:[]};var d=n("VU/8")(u,m,!1,function(e){n("CtTC")},"data-v-a1887aac",null).exports;i.default.use(r.a);var p=new r.a({routes:[{path:"/",redirect:"/koa2vue/articlesList"},{path:"/login",name:"login",component:c},{path:"/koa2vue",name:"layout",component:d,children:[{path:"articleDetail",name:"articleDetail",component:function(){return n.e(0).then(n.bind(null,"zvDi"))}},{path:"grid",name:"grid",component:function(e){n.e(2).then(function(){var t=[n("9+e2")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"myArticlesList",name:"myArticlesList",alias:"articlesList",component:function(){return n.e(0).then(n.bind(null,"gntg"))}},{path:"publish",name:"publish",component:function(e){return n.e(1).then(function(){var t=[n("ZFtp")];e.apply(null,t)}.bind(this)).catch(n.oe)}}]}]}),g={name:"App",mounted:function(){var e=window.innerHeight,t=window.innerWidth;e||(e=document.documentElement.clientHeight,t=document.documentElement.clientWidth),console.log(t+"-------------"+e),this.$store.commit("setWindowH",e),this.$store.commit("setWindowW",t)}},h={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var f=n("VU/8")(g,h,!1,function(e){n("q5S8")},null,null).exports,v=n("zL8q"),w=n.n(v),y=n("mvHQ"),_=n.n(y),x=n("NYxO");i.default.use(x.a);var b=new x.a.Store({state:{currentUser:"",axiosInstance:{},windowWidth:"",windowHeight:"",curArticle:{}},mutations:{setCurrUser:function(e,t){window.localStorage.setItem("username",t),e.currentUser=t},setAxiosInstance:function(e,t){e.axiosInstance=t},setWindowH:function(e,t){e.windowHeight=t,window.localStorage.setItem("windowHeight",t)},setWindowW:function(e,t){e.windowWidth=t,window.localStorage.setItem("windowWidth",t)},setCurArticle:function(e,t){var n=_()(t);window.localStorage.setItem("curArticle",n),e.curArticle=t}},getters:{}}),S=n("mtWM"),$=n.n(S);n("tvR6");i.default.config.productionTip=!1,i.default.use(w.a),new i.default({el:"#app",router:p,store:b,components:{App:f},template:"<App/>",mounted:function(){var e=this,t="";t="http://www.nodetop.top";var n=$.a.create({baseURL:t});n.interceptors.response.use(function(t){return"E"==t.data.code&&"login"==t.data.redirect?(e.$router.push({name:"login"}),a.a.reject({message:t.data.msg,status:500,statusText:t.data.msg})):t},function(e){return this.$message({message:e,type:"error"}),a.a.reject(e)}),b.commit("setAxiosInstance",n)}})},q5S8:function(e,t){},tvR6:function(e,t){}},["NHnr"]);